<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile | freshstocks</title>
    <link rel="stylesheet" href="userprofile.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&family=Roboto&display=swap" rel="stylesheet">

</head>

<body>
    <div class="wholeprofilecontainer">

    <div class="userimg">
     
        <img  class="userimground" src="images/images.png" alt="">
         <h1 class="username" id="username"></h1>
         <p class="useremail" id="useremail"></p>
         <p class="useremail" id="addressLine1"></p>
         <p class="useremail" id="addressLine2"></p>
         <p class="useremail" id="mobileNumber"></p>
         <p class="useremail" id="emailID"></p>
         <p class="useremail" id="education"></p>
         <p class="useremail" id="area"></p>
         <p class="useremail" id="stateRegion"></p>
         <p class="useremail" id="country"></p>
    </div>

    

   <div class="userdetails">
     
  <h1 class="profileh1">Profile Settings</h1>
<form id="form">
  <div class="namesurflex">
    <div>
<label for="name">Name</label><br>
  <input type="text" class="name" id="name" placeholder=" enter your name" ><br>
</div>
<div>
<label for="surname">Surname</label><br>
  <input type="text" class="surname" id="surname" placeholder=" enter your surname" ><br>
</div>
</div>

<label for="mobilenumber">Mobile Number</label><br>
<input type="number" class="mobilenumber" id="mobilenumber" placeholder=" enter your mobilenumber" ><br>
<label for="addressline1">Address Line 1</label><br>
<input type="text" class="addressline1" id="addressline1" placeholder=" enter your addressline1" ><br>
<label for="addressline2">Address Line 2</label><br>
<input type="text" class="addressline2" id="addressline2" placeholder=" enter your addressline2" ><br>
<label for="postalcode">Postcode</label><br>
<input type="number" class="postalcode" id="postalcode" placeholder=" enter your postalcode" ><br>
<label for="state">State</label><br>
<input type="text" class="state" id="state" placeholder=" enter your State" ><br>
<label for="area">Area</label><br>
<input type="text" class="area" id="area" placeholder=" enter your Area" ><br>
<label for="emailid">Email ID</label><br>
<input type="email" class="emailid" id="emailid" placeholder=" enter your Email ID" ><br>
<label for="education">Education</label><br>
<input type="text" class="education" id="education" placeholder="Education" ><br>  

<div class="countrystateflex">
<div>
<label for="country">Country</label><br>
<input type="text" class="country" id="country" placeholder="Country" ><br>
</div>
<div>
<label for="stateregion">State/Region</label><br>
<input type="text" class="stateregion" id="stateregion" placeholder="State/Region" ><br>
</div>
</div>
<button class="submit" type="submit" id="edit" >Edit</button>
  <button class="submit" type="submit" >Submit</button>
  <button class="submit" type="submit"  id="delete">delete</button>

</form>
</div>


   <div class="userexperience">

    <h1 class="thirdcolumnh1">Edit Experience</h1>

    <label for="experience">Experience in Trading</label><br>
    <input type="text" class="experience" id="experience" placeholder="For Ex: 0 or 1 year of experience"  /><br>
  <br>
    <label for="additional">Additional Details</label><br>
   <textarea name="additional" id="additional" cols="30" rows="10" placeholder="Write Any Slogans You Like to Add into your profile section.So, other users can see your comments." ></textarea><br>
   </div>


</div>



<script>
    // function functionsubmit() {
    //     alert("Your Changes has been Saved")
    // }

    

        // let BIO = JSON.parse(localStorage.getItem("array_info"));
        // console.log(BIO);


        // let x = BIO; 
//  for(i=0;i< userdata.length; i++) {



//   //   let x = userdatas; 
// // //  for(i=0;i< userdata.length; i++) {
// document.getElementById("name").value = x[0]["firstName"];
//  document.getElementById("surname").value = x[0]["lastName"];
//  document.getElementById("mobilenumber").value = x[0]["mobileNumber"];
// //  document.getElementById("addressline1").value = x[0]["mobileNumber"];
//  document.getElementById("emailid").value = x[0]["email"];
//  document.getElementById("education").value = x[0]["education"];
//  document.getElementById("area").value = x[0]["area"];
//  document.getElementById("stateRegion").value = x[0]["stateRegion"];
//  document.getElementById("country").value = x[0]["country"]



        // let Email = "";

        // if (from == "logIn") {
        //     let logIn = JSON.parse(localStorage.getItem("Login"));
        //     Email = logIn[logIn.length - 1]["email"];
            

        // }

        // else {

        //     let user_info = JSON.parse(localStorage.getItem("user_info"));
        //     // console.log(register)
        //     Email = user_info[user_info.length - 1]["email"]
        //     console.log(Email);
        // }

        // console.log(Email);


        // let userdatas = BIO.find(B => B.Email == Email);

        // console.log(userdatas);





//   let x = userdatas; 
// //  for(i=0;i< userdata.length; i++) {
//  document.getElementById("username").innerHTML = x.name + " " + x.surName;
//  document.getElementById("addressLine1").innerHTML = x.addressLine1;
//  document.getElementById("addressLine2").innerHTML = x.addressLine2;
//  document.getElementById("mobileNumber").innerHTML = x.mobileNumber;
//  document.getElementById("emailID").innerHTML = x.Email;
//  document.getElementById("education").innerHTML = x.education;
//  document.getElementById("area").innerHTML = x.area;
//  document.getElementById("stateRegion").innerHTML = x.stateRegion;
//  document.getElementById("country").innerHTML = x.country;

// }

// let edit = document.getElementById("edit");
// edit.addEventListener("click", (event) =>{
//   event.preventDefault()
//   console.log("Fine");
//   document.getElementById("name").disabled = false;
//  document.getElementById("surname").disabled = false;
//  document.getElementById("mobilenumber").disabled = false;
// //  document.getElementById("addressline1").disabled = false;
//  document.getElementById("emailid").disabled = false;
//  document.getElementById("education").disabled = false;
//  document.getElementById("area").disabled = false;
//  document.getElementById("stateRegion").disabled = false;
//  document.getElementById("country").disabled = false;

// //  document.getElementById("edit").style.display = none;
// });


      const user_email = JSON.parse(window.localStorage.getItem("array_info"));
      const user_details = JSON.parse(window.localStorage.getItem("user_info"));
      let get_obj = user_details.find(function(userobj){
        let check_email = userobj["email"];
        if(user_email === check_email){
          return true;
        }
      });
      console.log(get_obj);
      const firstName = document.getElementById("name");
      const lastName = document.getElementById("surname");
      const email = document.getElementById("emailid");
      const mobileNumber = document.getElementById("mobilenumber");
      firstName.value =  get_obj["firstName"];
      lastName.value =  get_obj["lastName"];
      email.value  =  user_email;
      mobileNumber.value =  get_obj["mobileNumber"];

      //user old data stored

      //user new data


      let form = document.getElementById("form");
      form.addEventListener("submit" , function(event){
      event.preventDefault();
      let firstName = document.getElementById("name").value;
      let lastName = document.getElementById("surname").value;
      let email = document.getElementById("emailid").value;
      let mobileNumber = document.getElementById("mobilenumber").value;
      let new_data = {
        firstName,
        lastName,
        email,
        mobileNumber,
      };

    
//new data stored in object
//addiing two object

    let newdata = Object.assign(get_obj,new_data);
    console.log(newdata);

    //find index
    let index = user_details.indexOf(get_obj);
    console.log(index);
    user_details[index] = newdata;
    localStorage.setItem("user_info", JSON.stringify(user_details));
    alert("You have successfully updated your account details!");
    location.reload();

    
   
      });


    let check = true;
      const present_details = JSON.parse(window.localStorage.getItem("user_info"));
      let get_present = user_details.find(function (object) {
        let check_email = object["email"];
        if (user_email === check_email) {
          let firstName = document.getElementById("name");
          let lastName = document.getElementById("surname");
          let email = document.getElementById("emailid");
          let mobileNumber = document.getElementById("mobilenumber");
          
          firstName.value = object["firstName"];
          lastName.value = object["lastName"];
          email.value = object["email"];
          mobileNumber.value = object["mobileNumber"];

         
          
        }

        
      });


      let delete_user = document.getElementById("delete");
      delete_user.addEventListener("click" , function(event){
      event.preventDefault();
      let index = user_details.indexOf(get_obj);
    let msg =  confirm("Are you sure you want to delete this account");
      if(msg !== true){
        return;
      } else{
        user_details.splice(index,1);
        console.log(user_details);
        localStorage.setItem("user_info",JSON.stringify(user_details));
        window.location.href ="../pages/newregister.html";
      }
   

    });
   
   
    



</script>
</body>
</html>