<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin-Edit</title>
    <link rel="stylesheet" href="../seller/adminEdit.css">
</head>
<body>
    



    


    <form class="form" id="form">
        <br>
        <div>
        <h1 class="contact-h1">EDIT COURSE FORM</h1>
        <br><label for="image-url" class="product-label" >Course Image URL</label>
        <br><input name="image-url" class="image-url" id="image-url" type="text" placeholder="course Image Url" required>

        <br><br><label for="course-name" class="product-label">Course Name</label>
        <br><input name="product-name" class="image-url" id="course-name" type="text" placeholder="course name" required>

        <br><br><label for="course-timing" class="product-label">Course Timing</label>
        <br><input name="product-owned-by" class="image-url" id="course-timing" type="text" placeholder="course timing" required>

        <br><br><label for="course-language" class="product-label">Course Language</label>
        <br><input name="price" class="image-url" type="text" id="course-language" placeholder="course price" required>

        <br><br><label for="course-intake" class="product-label">Course Intaking Per Batch</label>
        <br><input name="price" class="image-url" type="text" id="course-intake" placeholder="course intake" required>

        <br><br><label for="course-cost" class="product-label">Course Cost</label>
        <br><input name="email" class="image-url" type="text" id="course-cost" placeholder="course cost" required><br>
<br></div>

<div class="second-row">
   <br><label for="old-cost" class="product-label" >Old Cost</label>
   <br><input name="image-url" class="image-url" id="old-cost" type="text" placeholder="course Image Url" required>

   <br><br><label for="course-description" class="product-label">Course Description</label>
   <br><textarea name="product-name" class="textarea-desc" id="course-description" type="text" placeholder="course Description" required></textarea>



   <br><br><label for="top-skills" class="product-label">Top Skills You'll learn</label>
   <br><input name="product-owned-by" class="image-url" id="top-skills" type="text" placeholder="course timing" required>

   <!-- <br><br><label for="course-videos" class="product-label">Course Videos</label>
   <br><input name="price" class="image-url" type="file" id="course-videos" placeholder="course videos" required> -->
        <button class="submit" type="submit" id="btn">Submit</button>
      </div>
    </form>
    <button class="submit" type="submit" id="delete">Delete</button>




<script>
   

   const url = window.location.search;
   const userparams = new URLSearchParams(url);
   const id = parseInt(userparams.get("id"));
   console.log(id);


   const course_data = JSON.parse(localStorage.getItem("course_data"));
console.log(course_data);
   const get_obj = course_data.find((Reg) => Reg.id == id );
   console.log(get_obj);

   let img = document.getElementById("image-url");
    let title = document.getElementById("course-name");
    let timing = document.getElementById("course-timing");
    let language = document.getElementById("course-language");
    let enrolled = document.getElementById("course-intake");
    let cost = document.getElementById("course-cost");
    let old_cost = document.getElementById("old-cost");
    let Description= document.getElementById("course-description");
    let top_skills = document.getElementById("top-skills");
   //  let videos = document.getElementById("course-videos");
    img.value = get_obj["img"];
    title.value = get_obj["title"];
    timing.value = get_obj["timing"];
    language.value = get_obj["language"];
    enrolled.value = get_obj["enrolled"];
    cost.value = get_obj["cost"];
    old_cost.value = get_obj["old_cost"];
    Description.value = get_obj["Description"];
    top_skills.value = get_obj["top_skills"];
   //  videos.value = get_obj["videos"];
   
   
   

   let form = document.getElementById("form");
   form.addEventListener("submit", (event) => {
    event.preventDefault();

 

    let img = document.getElementById("image-url").value;
    let title = document.getElementById("course-name").value;
    let timing = document.getElementById("course-timing").value;
    let language = document.getElementById("course-language").value;
    let enrolled = document.getElementById("course-intake").value;
    let cost = document.getElementById("course-cost").value;
    let old_cost = document.getElementById("old-cost").value;
    let Description= document.getElementById("course-description").value;
    let top_skills = document.getElementById("top-skills").value;
   //  let videos = document.getElementById("course-videos").value;



       let course_obj = {
        img,title,timing,language,enrolled,cost,old_cost,Description,top_skills,id 
    };


    
   //find index
   let index = course_data.indexOf(get_obj);
   console.log(index);

   course_data[index] = course_obj;

   //set to Localstorage
   localStorage.setItem("course_data",JSON.stringify(course_data));
   alert("you have successfully updated your course");
   location.reload();
   
   window.location.href = "../seller/adminCoursesAdd.html";
   
});

// edit course end



//delete course 

 let removeUser = document.getElementById("delete");
 removeUser.addEventListener("click", (event) => {
    event.preventDefault();

 let index = course_data.indexOf(get_obj);
   console.log(index);

   let msg = confirm("are you sure you want to delete");
   if(msg !== true ){
      return false;
   } else {
    course_data.splice(index,1);
    localStorage.setItem("course_data",JSON.stringify(course_data));
    window.location.href = "../seller/adminCoursesAdd.html";

   }



 });
    




  
</script>
</body>
</html>